<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance Report</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="top-bar">
    <h1>üìä Attendance Report</h1>
    <p class="subtitle">Automatically recorded using Face Recognition</p>
</header>

<main class="main-container">

    <section class="card">
        <h2>Recorded Attendance</h2>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Time</th>
                    </tr>
                </thead>

                <tbody id="attendance-body">
                    <tr>
                        <td colspan="3" class="muted">Loading attendance...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="actions">
            <a href="index.html" class="btn secondary">‚Üê Back to Home</a>
        </div>
    </section>

</main>

<script>
fetch("http://127.0.0.1:5000/attendance_data")
.then(res => res.json())
.then(data => {
    let html = "";
    data.reverse().forEach(row => {
        html += `
            <tr>
                <td>${row[0]}</td>
                <td>${row[1]}</td>
                <td>${row[2]}</td>
            </tr>
        `;
    });
    document.getElementById("attendance-body").innerHTML = html;
})
.catch(() => {
    document.getElementById("attendance-body").innerHTML =
        `<tr><td colspan="3" style="color:#ef4444;">Failed to load attendance</td></tr>`;
});
</script>

</body>
</html>
